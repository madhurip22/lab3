<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <title>WA Polygon and Line</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.js"></script>
    <style>
        body { margin: 0; padding: 0; }
        #container { display: flex; height: 100vh; }
        #table-panel { flex-basis: 400px; overflow-y: auto; padding: 10px; }
        #map { flex-grow: 1; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        tr:nth-child(even) { background-color: #f2f2f2; }
    </style>
</head>

<body>
    <div id="container">
        <div id="table-panel">
            <h2>GeoJSON Features</h2>
            <table>
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Coordinates</th>
                    </tr>
                </thead>
                <tbody id="feature-table"></tbody>
            </table>
        </div>
        <div id="map"></div>
    </div>

    <script>
        mapboxgl.accessToken = 'YOUR_MAPBOX_ACCESS_TOKEN';
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v12',
            center: [-122.32, 47.63],
            zoom: 9
        });

        async function loadGeoJSON() {
            const polygonData = await fetch('assets/uw.json').then(res => res.json());
            const lineData = await fetch('assets/home.json').then(res => res.json());

            map.on('load', () => {
                map.addSource('polygon', { type: 'geojson', data: polygonData });
                map.addLayer({
                    id: 'polygon-layer',
                    type: 'fill',
                    source: 'polygon',
                    paint: { 'fill-color': '#0080ff', 'fill-opacity': 0.5 }
                });
                map.addLayer({
                    id: 'polygon-border',
                    type: 'line',
                    source: 'polygon',
                    paint: { 'line-color': '#0000ff', 'line-width': 2 }
                });

                map.addSource('line', { type: 'geojson', data: lineData });
                map.addLayer({
                    id: 'line-layer',
                    type: 'line',
                    source: 'line',
                    paint: { 'line-color': '#ff0000', 'line-width': 3 }
                });

                const tableBody = document.getElementById('feature-table');
                [polygonData.features[0], lineData.features[0]].forEach(f => {
                    const row = document.createElement('tr');
                    const typeCell = document.createElement('td');
                    typeCell.textContent = f.geometry.type;
                    const coordCell = document.createElement('td');
                    coordCell.textContent = JSON.stringify(f.geometry.coordinates);
                    row.appendChild(typeCell);
                    row.appendChild(coordCell);
                    tableBody.appendChild(row);
                });

                const allCoords = [
                    ...polygonData.features[0].geometry.coordinates[0],
                    ...lineData.features[0].geometry.coordinates
                ];
                const bounds = allCoords.reduce((b, coord) => b.extend(coord), new mapboxgl.LngLatBounds(allCoords[0], allCoords[0]));
                map.fitBounds(bounds, { padding: 20 });
            });
        }

        loadGeoJSON();
    </script>
</body>
</html>
